<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¡Feria Online! Pedir</title>
</head>
<body>
    <h1>¡Haz tu pedido!</h1>
    <div class="container">
        <form class="formulario" id="form-pedido">
            <div id="region-input" class="grupo-input"> 
                <label for="region">Región:</label>
                <input id="region" list="regiones" name="region">
                <datalist id = "regiones"> 

                </datalist>
            </div>
            <div id="comuna-input" class="grupo-input"> 
                <label for="comuna">Comuna:</label>
                <input id="comuna" list="comunas" name="comuna">
                <datalist id = "comunas"> 

                </datalist>
            </div>
            <div id="tipo-input" class="grupo-input"> 
                <label for="tipo">Tipo:</label>
                <input id="tipo" list="tipos" name="tipo">
                <datalist id = "tipos"> 
                    <option value="Fruta">
                    <option value="Verduras">
                    <option value="Otro">
                </datalist>
            </div>
            <div id="descripcion-input" class="grupo-input"> 
                <label for="descripcion">Descripción:</label>
                <input  id="descripcion" type= "text" size = 80 name="descripcion">
            </div>
            <div id="cantidad-input" class="grupo-input"> 
                <label for="cantidad-numero">Cantidad:</label>
                <input id="cantidad" type= "text" size = 10 name="cantidad">
            </div>
            <div id="nombre-input" class="grupo-input"> 
                <label for="nombre">Nombre:</label>
                <input id="nombre" type= "text" size = 80 name="nombre">
            </div>
            <div id="email-input" class="grupo-input"> 
                <label for="email">Email contacto:</label>
                <input id="email" type= "text" size = 30 name="email">
            </div>
            <div id="celular-input" class="grupo-input"> 
                <label for="celular">Número celular contacto:</label>
                <input id="celular" type= "text" size = 15 name="celular">
            </div>
            <div class="botones">
                <button type="button" id="submit-pedido">
                  Agregar pedido
                </button>
              </div>
        </form>
    </div>
    <script>
        const validarDonacion = () => {
            const validadorMail = (mail) => (/^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/).test(mail);
            const validadorNumero = (numero) => (/\d{9}/).test(numero);
            const validadorText = (txt,max) => txt && txt.length <= max;
            const validadorName = (txt,max,min) => txt && txt.length <= max && txt.length>=min;
            const validadorTipo = (tipo) => {
                const opc = ["Fruta", "Verdura", "Otro"];
                return opc.includes(tipo);
            }
            //VALIDADORDIAHORAFECHA
            let regionInput = document.getElementById("region");
            let comunaInput = document.getElementById("comuna");
            let tipoInput = document.getElementById("tipo");
            let descripcionInput = document.getElementById("descripcion");
            let cantidadInput = document.getElementById("cantidad");
            let nombreInput = document.getElementById("nombre");
            let emailInput = document.getElementById("email");
            let celularInput = document.getElementById("celular");
            
            let isValid = false;
            let msg = "";
            if (!validadorText(descripcionInput.value,250)){
                msg += "¡Descripción invalida!\n";
                    descripcionInput.style.borderColor = "red"; 
            } else {
                    descripcionInput.style.borderColor = "";
            }
            if (!validadorTipo(tipoInput.value)){
                msg += "¡Tipo invalido!\n";
                    tipoInput.style.borderColor = "red"; 
            } else {
                    tipoInput.style.borderColor = "";
            }
            if (!validadorText(cantidadInput.value,10)){
                msg += "¡Cantidad invalida!\n";
                    cantidadInput.style.borderColor = "red";
            } else {
                    cantidadInput.style.borderColor = "";
            }
            //VALIDADOR DÍAHORAFECHA
            if (!validadorName(nombreInput.value,80,3)){
                msg += "¡Nombre invalido!\n";
                    nombreInput.style.borderColor = "red";
            } else {
                    nombreInput.style.borderColor = "";
            }
            if (!validadorMail(emailInput.value)){
                msg += "¡Email invalido!\n";
                    emailInput.style.borderColor = "red";
            } else {
                    emailInput.style.borderColor = "";
            }
            if (!validadorNumero(celularInput.value)){
                msg += "¡Número invalido!\n";
                    celularInput.style.borderColor = "red";
            } else {
                    celularInput.style.borderColor = "";
            }
            if (msg === ""){
                msg = "¡Has completado tu pedido!"
                isValid = true;
            }
            alert(msg)
            if (isValid){
                window.location.href = "./inicio.html"
            }
        }
        let submitBtn = document.getElementById("submit-pedido");
        submitBtn.addEventListener("click", validarDonacion);   
    </script>
</body>
</html>